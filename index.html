<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>UGS Web Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="favicon.png">

<style>
body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:#020617;
  color:white;
}

/* HEADER */
header{
  padding:20px;
  text-align:center;
  font-size:28px;
  font-weight:900;
}

/* LETTER NAV */
#letters{
  position:sticky;
  top:0;
  background:#020617;
  padding:10px;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:6px;
  z-index:1000;
}
#letters button{
  background:#020617;
  color:white;
  border:1px solid white;
  border-radius:6px;
  padding:4px 8px;
  cursor:pointer;
}
#letters button:hover{
  background:white;
  color:black;
}

/* GAME GRID */
#games{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:16px;
  padding:20px;
}
.game{
  background:#020617;
  border:1px solid rgba(255,255,255,.15);
  border-radius:14px;
  padding:14px;
  cursor:pointer;
}
.game:hover{
  border-color:white;
}
.game h3{
  margin:0 0 6px 0;
  font-size:16px;
  cursor:pointer;
}

/* BACK TO TOP */
#backToTop{
  position:fixed;
  bottom:90px;
  right:20px;
  background:white;
  color:black;
  padding:10px 14px;
  border-radius:999px;
  font-weight:900;
  cursor:pointer;
  display:none;
  z-index:3000;
}

/* ACTION BAR (3.0 ADDITION) */
#actionBar{
  position:fixed;
  bottom:30px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:14px;
  background:#020617ee;
  padding:14px 20px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.1);
  z-index:4000;
}
#actionBar button{
  background:transparent;
  color:white;
  border:1px solid white;
  border-radius:999px;
  padding:8px 16px;
  font-weight:900;
  cursor:pointer;
}
#actionBar button:hover{
  background:white;
  color:black;
}
</style>
</head>

<body>

<header>UGS Web Hub</header>

<div id="letters"></div>

<div id="games"></div>

<div id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">↑</div>

<!-- 3.0 ACTION BAR -->
<div id="actionBar">
  <button onclick="showHome()">Home</button>
  <button onclick="playRandom()">Random</button>
  <button onclick="toggleFavorites()">Favorites</button>
</div>

<script src="games-data.js"></script>

<script>
/* ===== CORE STATE ===== */
let showingFavorites=false;

/* ===== LOCAL STORAGE ===== */
const FAVORITES_KEY="ugs_favorites";
const RECENT_KEY="ugs_recent";

function getFavorites(){
  return JSON.parse(localStorage.getItem(FAVORITES_KEY)||"[]");
}
function setFavorites(f){
  localStorage.setItem(FAVORITES_KEY,JSON.stringify(f));
}
function addRecent(name){
  let r=JSON.parse(localStorage.getItem(RECENT_KEY)||"[]");
  r=r.filter(n=>n!==name);
  r.unshift(name);
  r=r.slice(0,10);
  localStorage.setItem(RECENT_KEY,JSON.stringify(r));
}

/* ===== LETTER NAV ===== */
const lettersDiv=document.getElementById("letters");
"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(l=>{
  const b=document.createElement("button");
  b.textContent=l;
  b.onclick=()=>jumpToLetter(l);
  lettersDiv.appendChild(b);
});

/* ===== RENDER ===== */
function render(){
  const container=document.getElementById("games");
  container.innerHTML="";

  const list=showingFavorites
    ? gamesData.filter(g=>getFavorites().includes(g.name))
    : gamesData;

  list.forEach(game=>{
    const card=document.createElement("div");
    card.className="game";
    card.id="game-"+game.name[0].toUpperCase();

    card.onclick=()=>{
      addRecent(game.name);
      open(game.url,"_blank");
    };

    card.innerHTML=`
      <h3 onclick="event.stopPropagation();toggleFavorite('${game.name}')">
        ${game.name}
      </h3>
      <p>Instant play · Fullscreen</p>
    `;
    container.appendChild(card);
  });
}

/* ===== NAV / FEATURES ===== */
function jumpToLetter(l){
  const el=document.querySelector("#game-"+l);
  if(el) el.scrollIntoView({behavior:"smooth"});
}

function playRandom(){
  if(!gamesData.length) return;
  const g=gamesData[Math.floor(Math.random()*gamesData.length)];
  addRecent(g.name);
  open(g.url,"_blank");
}

function toggleFavorite(name){
  let f=getFavorites();
  f=f.includes(name)?f.filter(n=>n!==name):[...f,name];
  setFavorites(f);
}

function toggleFavorites(){
  showingFavorites=!showingFavorites;
  render();
}

function showHome(){
  showingFavorites=false;
  render();
}

/* ===== BACK TO TOP ===== */
window.addEventListener("scroll",()=>{
  document.getElementById("backToTop").style.display=
    window.scrollY>300?"block":"none";
});

/* ===== INIT ===== */
render();
</script>

</body>
</html>

